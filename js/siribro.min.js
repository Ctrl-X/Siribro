!function(a){"use strict";function u(){b={isLogEnabled:!0,isPersistHistory:!1,typingSpeed:20,readingSpeed:50,botface:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAB8ZJREFUWIXtlluMnVUVx397f/fbmTNnLqXU6XTaTi+U0lJKSwdaqFwSMBb0ScFAgCdMjNEYH3zhwRiDhpiIDyZenkR8QX2ASqURWkJVtBeE6bRMKW3pTG9nZs6cObfvtrcP58xkwMolPvigK/lnf9/+9lrr/6291tob/i//ZRGfVmHXcLje99IRR4itUuh+gFyLS4nWhxtN69DB8drYp7FnftKFD9xor4+iwjPL+ns3DvR4/UEQYBsghCDOFPV6nfenWpcH+sr/mI2rX3vhcHLik9j9RBF4cKv95NKly761eagQquYseVwjj2voPAFAmg7SDjCcEOl1cexMtTZ5YeIHz/0t+e5/TOBL25xnb7x+w5e7xZSolS8gpMCVGabQyI620pBpQVMZaKUp9C5jRpf0kWNv/+o3R5KHP8q+8VEf92yyfrxj0w2PedmkLPQtZ+2WnSxbtZGqshB5iswaCAEE/VhLN7Bpxz30DqwlVZps+qzoWza80WOq++TFfN+nJnDXuuiWmzau+F6PWQkH1m5k5/YRekKPUuQxvGoN0i9RnrqCdiLWbb2TbTduoegI+ktFhoZWU00UyfR7wi32rshID56/Ek9ezc9CEu7c4A44UvzQQK3Klfh9wRNr+gpun+V6bLthC1ltCrRCawVaM3RNL/F12zGkZEV/iXT2AgiBEBKE5JabtrF3epolreyafp8n7rrevdcQeg9KnpxN+PZfxpsT0MmBO4edlVHB/NPWIXcwzjWzdZFeiZ3kluV2cNuu3fT7Ep1noPMFAmiNtL12DiRNEGIRAQNhmFyJTQ68uo/Dp5Nat9d0unws17F4473m2blaevsrY62zEsAP5S+2rbQHLzdsVi4f5tolS6yCZwfSMnFMExU30GkTneeAQEgLYdpopdBKIUwbIS1AoPMcnTZRcQPHMDAtEz+0w8GBQWv1uq1cbjhsX+EO+o74JYC8fU3Y2xtaw+WGyxMP3MFnN69mz+4RbNvGtCxcmSOkibADpBMw3TR49fgUWCHSiZBOhDZDXjleZjY2kU6AsAOENLEMhWk5uLbNfdvWcM/2DXz10YeYSV16S/6au1Z2d0ltZOu7Q1nyfR/f1BhOSFAo4bkuaZoQCxfp+Eg7QNoBDz31Bx5+6kV+vm8M6YRIJ+Sne0d55Km9PPr0HxfWSccnky5p0sKxTRxToNKY7sBlstwkiPr6Wk68xwTIEQKtQUiE7eGGRTzPp5k2qMcZxSBCSBMtDE6eKwNw4nwFwwk7zzMAjJ0rI+0Qrdr5Up+u04g1vmNjOT46T9EqI/BchEqVzilLS1vHp2p6aq5eJ84FwrARpksYRtRamhMn3kYG/Ujbx3QCHr//ViLf5cH7Rha24MH7Rgh9h8fvvxVp+0jbR4TXMHriLWotiMIAIQ3Qirm5OoErqFbmprzMOSQA7t3svbJpedcd9USwe2Q7VypNXjv8JjcPBdw8cjcrBwaQhoUwbDDMdhLKdrkB7fJUCq1SyDN0nqBVxumJCf568CX+fqbGbRsGKRVDDh4bx3fg6Dvl/S+PNu82AHq6jAONxPhCfykonjr7Pm+On1Ebl0dix/ZdrFm9jtMTl2hlAiwHz4+Qlos0XYTlLFSAkAZCGCRpxky1xvRslVJ3L1FUpDZzntdH31cz1arwXI+xc9Uz9Vr6wLmZrLpwFoys9a51Db6vtFrf1x2t3nVdX/fnvvgYgaFopJpKLaFcmaOVK3IlME0b03ZAa7I0IcsSbEOSZzG9xZCeyKPgmbSExwvP/4x9b7wzU4/Fu0jxVq7ldw4cb1z8QCc8dLI5CTyyc727qxhYL2oNkeegs4Qw9Ch0uwwOuUjLRZgdGG11nWforIXOWqh00Zg2CWwLy4soSmXMZuY3D463XrtqK54XjWFZKrN930cg0EIghGhXyHyXkybCMJFWpxPSBNWuEiEkWkiEmNeV+H6AMqWjTMP+sD/5rxN6upap2UazQSNJQWu01ovOgRytMnSeodImKm22I6AWt2rV0dE004xqZYpWpis60+V/exjNy8GxxlHPplxrNPpqtVmcKEB0HCJS9OLMzxY95wk6S9q1nmegMgCqszNUZsrUE1l+fbzx5sdGAEBl+dNnJqut/S89D06hbTyP0Vnc/uukgYprqKSDuNaeS5voLG6vzRO0V+Llvb/mzMW5VqL50dV8XfU+cPpKPtrj6a2mka29cPY4K9ffjGNZbeM6B6VApZ2/nSfXHskShOlQzwW/fe4nnD5/mVMX6nv3j8ZPAgrQH0XABUIgerecvxxZ+XA8F68qT47KOMspLlmOa9sgBULrhX0XCISUCGlQzwTHjh7iwP7f8dbYxXz8YvXF/cfTbwA2YHWins8TWXwntDsEvMXjjlX216/tcT8/2Gv3LClF2LZNV1c3xUKRrq4ulFbMVeeozM5Qma2QxDGXpmucm06mJqdbL/z5VPIM0ARaHTQXvX+AgFzkfDERd2m3HF7Vb30l9O0tSyPZ5TqWZ5sCKfJ2zmiDJNM0W2nzUk1Va3PpkVPl5NkLFXWq4yy+Con0wwTmxeo4dzpRcTqwXJdoWZezudtXa11LfwYpih0GlVYsJmZa8uTEVHyslVEDkkWIO2h1xoU8+LhrudEhNL9/ZmdOdjCvrztQtPc36yDtOMw+xs//sPwT5ousS2LBa1UAAAAASUVORK5CYII="},w(),x(),c=$('<div class="message" data-id="messageBloc"><table cellpadding="0" cellspacing="0" border="0"><tr><td><div class="portrait"></div></td><td><div class="sentence" data-id="sentenceZone"><div data-id="phraseZone"></div><div class="interphrase"></div></div></td></tr></table></div>'),d=$('[data-id="inputZone"]'),e=$('[data-id="flowZone"]'),f=$('[data-id="chatZone"]'),g=null,h=[],i={},j=!1,k=[],t={},l=!1,m=null,n=null,r=null,s=0,q=!0,$(document).ajaxStop(y),f.on("submit",L),d.focus(),f.on("mouseover",function(){d.focus()})}function v(a){if(a)try{for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);siribro.options=b}catch(a){ma("ERROR : Unable to set options. Reason : ",a.message)}return this}function w(){$("<style>").prop("type","text/css").html("#chatContainer{margin:50px 0 0;bottom:10px;right:20px;position:fixed}#chatContainer .clear{clear:both}#chatContainer table,td,tr{margin:0;padding:0}#chatContainer button:focus,#chatContainer input:focus{outline:0}#chatContainer .message{padding:5px 10px 3px 5px}#chatContainer .message table{width:100%}#chatContainer .message table td:first-of-type{width:44px;vertical-align:bottom}#chatContainer .sentence div:first-child{padding:2px 7px;font-family:Helvetica,Arial,sans-serif;font-size:12px;line-height:16px;word-wrap:break-word}#chatContainer .interphrase{clear:both;margin-top:1px;height:1px}#chatContainer .portrait{background-size:contain;width:32px;height:32px;border-radius:10px;overflow:hidden;margin-right:10px}#chatContainer .fromBot{text-align:left}#chatContainer .fromBot .portrait{background-size:contain;margin-bottom:10px}#chatContainer .fromBot .sentence div:first-child{background:#e6e6e6;color:#000;float:left}#chatContainer .fromUser{text-align:right}#chatContainer .fromUser .sentence div:first-child{background:#4080ff;color:#fff;float:right}#chatContainer .fromHistory{opacity:.8}#chatContainer .fromSystem{text-align:center;font-size:12px;font-family:sans-serif;color:#555;font-weight:200}#chatContainer .chatZone{overflow:hidden;width:260px;margin:auto;border:1px solid #d6d6d6}#chatContainer .textZoneContainer{position:relative;height:300px;overflow:none}#chatContainer .textZoneContainer .textZone{position:absolute;width:100%;bottom:0;max-height:300px;overflow:auto}#chatContainer .sentence:first-child div:first-child{border-top-left-radius:8px;border-top-right-radius:8px}#chatContainer .sentence:last-child div:first-child{border-bottom-left-radius:8px;border-bottom-right-radius:8px;margin-bottom:5px}#chatContainer .fromBot .sentence div:first-child{border-top-right-radius:8px;border-bottom-right-radius:8px}#chatContainer .fromUser .sentence div:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}#chatContainer .message.typing{margin-top:0}#chatContainer .typing .sentence div:first-child{background-image:url(data:image/gif;base64,R0lGODlhTQAmAPf/AObm6ujo6q6tsuXk6eXk7auqrZiXmo+OkKalqe7t8/Dv9fLx9/n4/p+eor++w+Pi6Ojn64WEh6Cfo+rp8L28wZuanvj3/uDf5fj3/Pf2/K+us+bm5ejo6MHAxerq69LR1tDP1KCgoJ6enYaFiLq7v+Xl5qGgpLm4vYqJjZSTlvPy95ubm7OytsC/xKOipqmoq/b1+7e2u7i3vNfW3KKhpeTl5Lq5v+Lg6Nzb4Pb0/JaVmfTz+szL0ZCPk6Ojo4KBhNnY3srJzoyLj+bl57KxttTT2JOSlc/O08/O1MrJ0KampsbFyp6dooiHibe2vLW0uff2+/Hx9Ozr8+Tj5ZGQlMjHzI2MjcPCx4qKi7u6v5mYnJOTk5GRkY+PjoOChebl7ebm5+bl7Obl6uXk6uTj6ebm6Ofm7Ofn5+bl6ebl7uzr8e/u9L69wuvq8OTj6Orp7+bm6ejn7e3s8vPy+OXk6+Tj6uno7u3s8/Hw9vX0+u7t9Obl6PPy+erp7vHw9/Tz+ZeWmufn6KSjp7y7wOvq77Gwtebk7pGQk+jn7PX0++vq8ePi5+jn7uHg5fDv9rq5veLh59va37a1upeWmZ6doefm7efm6o2Mj5KRleno79fW2+bk7JqZncnIzeHg5+bk7+/u9ZWUmMvKz8PCyO3s8dbV2pybnqOipd7d4trZ3+vq8uPj4rOyuJiXm5OSl+3s9JyboNva4JeXlt/e5Obk7fLx+LSzuObn5ufn5ufl7bKxtb69waGgo+fn6eno7aSjqKinq+Xl6sLBxs7N0uTk4+Xl7OXm5ZiYl4+Qj728wuXj6efn7by7vvLy8rm4vpiWmOLh5eXk7uPj5KKhpu/u8/X0+ebk8fHw+IKCgefm6LW0ura1ube2uZ2coJCPj9jX3J+eodXU1/Pz+MHAw5STkpqZnpuanZSUk8LBxObl78nIzp+fn8rKzfX0/JGRju3t86uqr+vp8KyrsNTT1+np7unp783M0c3M0peYl87N0c7O0dXU2tbW2ebl6+bm5v///yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iMUNENjk1N0QxRDk5RjZCMkY1RDgyNzhCQjg0MEY4ODYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODEzQTk3QjUyMEI5MTFFMzkxMTdEODlGMTI5NTlCRTEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODEzQTk3QjQyMEI5MTFFMzkxMTdEODlGMTI5NTlCRTEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBBNkQ1QkI4RDUyMzY4MTE4MjJBRjRCMjFGNkM5RDdGIiBzdFJlZjpkb2N1bWVudElEPSIxQ0Q2OTU3RDFEOTlGNkIyRjVEODI3OEJCODQwRjg4NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUyAP8ALAAAAABNACYAAAj/AP0JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIDeC2bOnDJiRJU2ePBmyIxowBIf0m0mzH5wNBtGUwVlwpU+YLQfu4Sm05sybPcXsTGpUzB6GZzIGujXwzAYwRvsBIBgIFxgzQ6MOBCOmphg0LxeKvQiGaFQwY+KOmSkG6K0Sq6bQsXQL18ANNdzMpYsWaMK1FtFsIGqshJk3b/oNVorXQ5R3dJTBGUhsSrw1asaQ6XcWzR7DBxFXFHMTZ4kSd9YwykTtTdwwdcTkybMsAYN4jQaUkQYBxjV6CnLEI1MabZkhqKtmLBNG5+sENzq16IAkUxsydHxB/7mggQmvcSoUkFnUhwG/FyFe6JujKDdatAPQpM6IdeYYBbM8ocsJTmhwRRsTkLGAJkZc0koKXhTgxyuVWMDOCFbIsgUWzPhhhn1olKWfQapR1B8ZaigyCAsOONDBIxoAAUobdtBwgAsm/FLBCJ0kssMA53ijRAg+yILMDI5AYtSIH/XXjwKpxDCIA2ywsQsRSajCBxCAVGBCA5QI4ooAa1hwhDsi+LDOOiFwQUEiAwzWjxlMetTff7E4MWWVbNgShCKJzDAJLBKA6YIOBdxhAQ9csLlmCOSQkEgwA9BkhiUhnXiHHSdI0oGLFBQywxpy9FMBJr9IIAgNKLTwBww4dP9xzJA+iNAFCAsoWROmIH1lxkx4lKKBLVnYoIEziMhBhgqiWHFIBZxEAEgbtUyQBzfYbLECPk28oEY9o9EUBq8gmfHrAHHooYkDWWSxxANyiGZHHh80oEMoCHgCgxgPKDAHBc8E/MQba4wWxhcIf1GnR5aIMRcZZujRRyNjyFEqHf2QEccOpETSyByOkDHaA2pYUAkOi/ChR7gHI1xdS9lAMADGc9mhhhpxxEWTaGrw4YcdD8g52hri4GHGA+Im/HKm5poRhn9jzJxVP3WIHG5NIrshmLgtf5GGGCWK1I/SYZRtdtlTp232TF1/cXAuYLcER8J011332TWVbffd/aBhEfZGZRAQTRqEF2744YbTbbghjBtC99N9/60RGHQQYPnlmGeu+eaMf/IJ3uYOIPnkP5Vu+ulgDFFGGXDAsXoZaFhiyQCWjB6URWfkrnvut/fu++/ABy/88MQXb/zxyC8UEAAh+QQFMgD/ACwQAAcANAAZAAAI/wD9+QtEkCCYg/8C/Vt4sOHChxAjSpwY0d8/MRgzatzIcSOaj2VCihT5EQzFf/7A9FvJUiLLlzBjRnwpxuREgWVYmlnp8uVOM//G9NsJEyLMmhRxxiTDtN9CmGOariS6kqnRlWL6hbEpUenUMQ/a4Elg5sHTfnXItNEjJ45QlmTqtJm5Ek0YWlwr+ss5lMyYPwrGKGp3h8zCAWbwEJpVR8EbSEIfxMngx44jGIT+scy61WJXf3CqjoEx40W3Bg5ArTHbRwEQCk5kLEGUAOybf6WASfg37F8bMjQF3twblEyGDyiEtErhRd6CO/8ShCsUI4sNAVn6SGGEIUiTS5OMoP8YtBA4T+Gf0SxcQEjLJRomBBmIcMTCv0WPZLRw0KFFIRBy/PFPCj38wsspgPQgUU2edSXGGGNkAMIhFUjQwIVCsPDHAt/IMAgbILYgwyh9ZPDPIUzQAE4DElDxTx4QMXhSUHVYAAIV5VjIohCF8MHHPzJQsEuIMqBT4okNmHChBCnYkMcYD8k44wNzTADIAdPQ8IsWI/CQgSKQnPBIBxS0IAwLosix0AEGICCBC90cgMQ/Zi0k5UkDjGGBKFgc0EooEZyyhgJ1JACCLidQQEEhrJCRQBuJxPCDEeYA8g8w/2QSURkNRsTVA4zskI8LWlQQgxkK/DPAP3oU8cgJ1aG6ggdQCyVjgAGtaEMRHJ1CBAatYbiBCB9SeGLGH3r4FRQja/QTywVtyEEHlDNGhEavD4GBCCIQjaEGHmuYAZxRE+iRQCaGRaTHHDNeSxEYYUQkBhluKCsRhBBWuyt6nobxhb4AA9wZtmfA+2/ACFMkhkAEg4FGP8EUE8bEFFdc8RcYY3xxxrRs4nEYm4HBsEQcLMRwQyinrPLKBzHs8svYBvAQzDTXbPPN/D7kQcI8m0wzRTv3LDTAZwQEACH5BAUyAP8ALAgABwA9AB8AAAj/AP8JHEjQn8GDCBMeJMiwocOHEAcqnEixokWDER+CEcOxo8ePaEKiKUOypMmTKMug6XUmI8ONLhnGMdMvZsN+/QK0tPkPTE2BZgSOgRjm34N/ZILy/Pcl506bPgfWJGMngZp+ZAiSWdQHz52hBMf0e6PmjRiwBD+l07k06r+adfj8ebMmT5u3WPvlyWMmAQNC0ASS6fpmzBtQdtAK/GKNLU+3buj8i6TBBIIqC+T8G+MLygUNDUx0UBHFDZkJC/5RGNRiXlmG/eg4hipGoBsM8y6hmNRjxJM5qh4s0GTkUqsUXgr4eRVHgT15MbLIKLSkTRy0/cTMjgkTkp9/k4QI/3SRYsQ+DITs0DjgwsSvCiM6JVLQiIWMDg5aUCCS6s5RgTht55JbFvDQgykCScAECidUkwcQgFRgQgOUCOKKAGssUIQkDjjABhsObBOEHtiZIaBLRdUWBCYVNCAQE/+wMgcGmgACiwQUuqADPHcs8IEkFHwIYgzqrEETgCY+tdQ/fzxABSaCmCAIJ//c848cYlSAyS8SCEIDCi388R0Rg3RAQYcsFJEAdk4tVYZgZjDQwQiHVKCDFzQkgIcbKohiRZ2cRABIG7W8ccco8thAQRaF2ABBHwyFcWJEZVQyUBtzjGKKDgYQEQceSP2TxwcN6BAKAp7AIIYbd6hRhSQnxNxwxRikKMbUpBDBQdADjMwRRyRu/LPGQGTEsQMpkTQyhyNkZCWQCnWg0ogcCfxEkKRKulRGHFr9c8ccCnDLEBlq8OGHHf8NZIYcayQQh7OR4vpQGV8wBFawDtXRLLwDjeGvrQSlIa9D9C6ZEU7WMvRFLif6A9GbYURc1FI11YaXxGEg7NE/2mX7j8MP+QMGSXvAAQcAYuD0UHZwkATGyyPD/DJFYLDUEMguXaQzQi55jLPBQAf9c9BE8zR00UhHdHTSTDft9NNQRy311FTHxME/V1e95FNneNAMBwEBADs=);background-size:contain;width:27px}#chatContainer .inputArea{border-top:1px solid #e6e6e6;padding:5px 5px 2px 10px}#chatContainer .inputArea input{border:0;width:100%;height:24px;font-family:Helvetica,Arial,sans-serif;font-size:12px}").appendTo("head")}function x(){$("body").append('<div id="chatContainer" style="display:none" class="close">         <form data-id="chatZone">           <div class="chatZone">                <div class="textZoneContainer">                   <div data-id="flowZone" class="textZone"><!-- Here come new text --></div>               </div>                <div class="inputArea">                   <input type="text" placeholder="Type a message" data-id="inputZone">                    <input type="submit" value="Send" style="display:none"/>                </div>              </div>           </form>       </div>')}function y(){k.forEach(function(a){a()}),k=[]}function z(a){return aa(a,"application/json"),this}function A(a){return aa(a,"text/markdown"),this}function B(a){if(b.isPersistHistory&&!b.isHistoryLoaded&&("Cookies"in window?(h=Cookies.getJSON("history"),null==h&&(h=[]),W(),i=Cookies.getJSON("answers"),null==i&&(i={}),siribro.answers=i,b.isHistoryLoaded=!0):(ma("ERROR : Unable the set isPersistHistory to true. Reason : you need to include the cookie management library","https://github.com/js-cookie/js-cookie "),b.isPersistHistory=!1)),!l)return void k.push(function(){B(a)});if($("#chatContainer").show().removeClass("close").addClass("open"),null==g)throw"Please load a valid Markdown or JSON before calling .start(...)";0==h.length&&N(a)}function C(a){n=null!=a?a:Z(m,n),D(n)}function D(a){if(null!=a)switch(a.type){case"sentence":E(a);break;case"pause":J(a);break;case"input":K(a);break;case"optionGroup":R(a);break;case"goto":M(a);break;case"function":O(a)}}function E(a){var c=.2,d=F(a.text),e=$("<div/>").append(d).text().length,f=e/(b.typingSpeed+(2*Math.random()*c-c)),g=0,i=0,j=h.length>0?h[h.length-1]:{};if("User"==j.from){var k=j.sentence,l=$("<div/>").append(k).text().length;g=1,i=l/(b.readingSpeed+(2*Math.random()*c-c))}else i=e/b.readingSpeed;i+=g,ma("====Sentence===== "),ma("text : ",d),ma("textlength : ",e),ma("thinking duration : ",i),ma("typing duration : ",f),o=window.setTimeout(function(){o=null,H(),p=window.setTimeout(function(){p=null,I(d,"Bot"),C()},1e3*f)},1e3*i)}function F(a){if(!a)return"";var b=new RegExp(/(\[\w{2,}\])+/,"gi"),c=a.replace(b,function(a,b,c){var d=G(a),e=Math.floor(Math.random()*d.length);return d[e]}),d=c.split("|"),e=Math.floor(Math.random()*d.length);return $.trim(d[e])}function G(a){var b=[],c=Y("value_bloc",a);if(c){var d=c.values;ia(d)&&(b=d)}return b}function H(){q=ka();var a=c.clone().addClass("typing").addClass("fromBot"),d="url('"+b.botface+"')";a.find(".portrait").css("background-image",d),a.find('[data-id="phraseZone"]').html("&nbsp"),e.append(a),ja()}function I(a,b,d){var f=e.find('[data-id="messageBloc"]:not(.typing)').last(),g=f.find('[data-id="sentenceZone"]').last(),h=!1,i=!0;d&&(i=!1);var j;switch(b){case"Bot":q=ka(),f.hasClass("fromBot")?(h=!0,e.find(".typing").remove()):(j=e.find(".typing").removeClass("typing"),0==j.length&&(j=c.clone().addClass("fromBot"),e.append(j)));break;case"User":q=!0,f.hasClass("fromUser")?h=!0:(j=c.clone().addClass("fromUser"),e.find(".typing").length>0?e.find(".typing").before(j):e.append(j));break;case"System":i=!1,q=ka(),j=$('<div class="separator fromSystem" data-id="messageBloc"><div data-id="phraseZone"></div></div>'),ma(j),e.append(j);break;default:return}h?j=g.clone().insertAfter(g):d&&j.addClass("fromHistory"),i&&X(a,b),null!=j&&j.find('[data-id="phraseZone"]').html(a),ja()}function J(a){var b=1*a.millisecond;ma("====Pause===== "),ma("Delai : ",b),p=window.setTimeout(function(){C()},b)}function K(a){ma("====Input===== "),ma("wait for input... ")}function L(a){a.preventDefault();var c=$.trim(d.val());if(0!=c.length&&(r=c,d.val(""),ma("Value :",r),I(r,"User"),null!=n&&"input"==n.type)){var e=n.data;e&&(i[e]=r,siribro.answers=i,b.isPersistHistory&&Cookies.set("answers",i)),C()}}function M(a){var b=a.value;null!=b&&N(b)}function N(a){m=Y("dialog_bloc",a),n=null,C()}function O(a){var b=a.name;t[b]()}function P(a,b){return t[a]=b,this}function Q(a){if(null!=n)if("function"==n.type){var b=Z(m,n);if(null!=b)switch(b.type){case"optionGroup":b=S(b,a)}C(b)}else if("optionGroup"==n.type)if(a){var c=n.options,d=c[s],e=T(d);C(e)}else s+=1,R(n)}function R(a){ma("====OptionGroup===== "),ma("Choose an Option with last user input : ",r);var b=S(a,r);b!=a&&C(b)}function S(a,b){var c=a.options,d=null,e=null;if(ia(c))for(var f=s;f<c.length&&null==d;f++){var g=c[f],h=g.type,i=g.value;if("function"==h)return s=f,O(g),a;U(i,b)&&(d=g)}if(null==d&&ia(c)&&c.length>0){var j=c[c.length-1],k=j.value;k&&"other"==k.toLowerCase()&&(d=j)}if(null!=d)e=T(d);else{var l=_(m,a);l&&"input"==l.type&&(e=l)}return s=0,e}function T(a){var b=null,c=a.steps;return ia(c)&&c.length>0&&(b=c[0]),b}function U(a,b){if(!a)return null;a=$.trim(a);var c=new RegExp(/(\[\w{2,}\])+/,"gi");a=a.replace(c,function(a,b,c){for(var d=G(a),e=0;e<d.length;e++){var f=V(d[e]);d[e]=f.replace(new RegExp(/\s/,"gi"),"\\s?")}return d.join("|")}),a="\\b("+a+")\\b",b=V(b);var c=new RegExp(a,"gi");return null!=b.match(c)}function V(a){var b=a;return null!=b&&(b=la(b.toLocaleLowerCase()),b=$.trim(b)),b}function W(){for(var a=0;a<h.length;a++){var b=h[a];if(0==a){var c=new Date(b.stamp);I(c.toLocaleDateString(),"System")}I(b.sentence,b.from,!0)}}function X(a,c){var d={from:c,stamp:+new Date,sentence:a};h.push(d),b.isPersistHistory&&Cookies.set("history",h)}function Y(a,b){var c=g,d=null;if(ia(c))for(var e=0;e<c.length;e++){var f=c[e],h=f.type?f.type.toLowerCase():"";if(h==a.toLowerCase()&&("undefined"==typeof b||f.name==b)){d=f;break}}return d}function Z(a,b){var c=null;if(null!=a)if(null==b)ia(a.steps)&&a.steps.length>0&&(c=m.steps[0]);else if(ia(a))for(var d=0;d<a.length;d++){if(a[d]===b){c=d+1<a.length?a[d+1]:-1;break}if(c=Z(a[d],b),null!=c){c==-1&&ia(a.steps)&&d+1<a.length&&(c=a[d+1]);break}}else if("object"==typeof a&&null!==a)for(var e in a)if(a.hasOwnProperty(e)&&(c=Z(a[e],b),null!=c))return c;return c}function _(a,b){var c=null;if(null!=a)if(null==b)ia(a.steps)&&a.steps.length>0&&(c=m.steps[0]);else if(ia(a))for(var d=0;d<a.length;d++){if(a[d]===b){c=d-1>0?a[d-1]:-1;break}if(c=_(a[d],b),null!=c){c==-1&&ia(a.steps)&&d-1>0&&(c=a[d-1]);break}}else if("object"==typeof a&&null!==a)for(var e in a)if(a.hasOwnProperty(e)&&(c=_(a[e],b),null!=c))return c;return c}function aa(a,b){$.ajax({url:a,beforeSend:function(a){a.overrideMimeType(b+"; charset=utf-8")},complete:function(a,b){if("success"!=b)throw"Ajax call failed : "+b;l=!0}}).done(function(a){null!=a&&a.length>0&&("application/json"==b?g=a:"text/markdown"==b&&(g=ba(a)))})}function ba(a){var b=null;const c=new RegExp(/^.*$/,"gm"),d=new RegExp(/^\s*$/,"g"),e=new RegExp(/[^.]?\/\/.*$/,"gm"),f=new RegExp(/[^.]?\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//,"g");if(a){b=[],a=a.replace(e,"").replace(f,""),a=a.replace(/\t/g,"    ");var g=a.match(c);g.push("");for(var h=[],i=[],j=0;j<g.length;j++){var k=g[j];d.test(k)?i.length>0&&(h.push(i),i=[]):i.push(k)}for(var j=0;j<h.length;j++){var l=ca(h[j]);l&&b.push(l)}}return b}function ca(a){const b=new RegExp(/^#\s(\w+)\s*$/,"g"),c=new RegExp(/^(\[\w+\])\s*$/,""),d=new RegExp(/\s*\*\s(.+)/,"");var e=a.shift(),f=null,g=null,h=[];if(g=b.exec(e))h=da(a,0),f={type:"dialog_bloc",name:g[1],steps:h};else if(g=c.exec(e)){for(var i=null,j=0;j<a.length;j++)(i=d.exec(a[j]))&&h.push($.trim(i[1]));f={type:"value_bloc",name:g[1],values:h}}return f}function da(a,b){var c=[];const d=new RegExp(/^(\s*)/,""),e=new RegExp(/\s*\*\s(.+)$/,""),f=new RegExp(/^\s*\*\s`\s*(.+)\((\w*)\)\s*`\s*$/,""),g=new RegExp(/^\s*\d{1,}\.\s(.+)$/,"");for(var h={};a.length>0;){var i=a[0],j=d.exec(i),k=j[0].length;if(k<b)break;a.shift();var l=null;if(l=f.exec(i))h=ha(l),h&&c.push(h);else if(l=e.exec(i))h=ga(l),h&&c.push(h);else if(l=g.exec(i)){"optionGroup"!=h.type&&(h=ea(),h&&c.push(h));var m=fa(l,a,k);m&&h.options.push(m)}else h=null}return c}function ea(){var a={type:"optionGroup",options:[]};return a}function fa(a,b,c){var d=null;if(ia(a)&&a.length>0){var e=da(b,c+1);d={type:"option",value:a[1],steps:e}}return d}function ga(a){var b=null;return ia(a)&&a.length>0&&(b={type:"sentence",text:$.trim(a[1])}),b}function ha(a){var b=null;if(ia(a)&&a.length>0){var c=a[1],d=a.length>2?$.trim(a[2]):null;switch(c){case"input":b={type:"input",data:d};break;case"goto":b={type:"goto",value:d};break;case"pause":b={type:"pause",millisecond:d};break;default:b={type:"function",name:c}}}return b}function ia(a){return"[object Array]"===Object.prototype.toString.call(a)}function ja(){window.setTimeout(function(){q&&e.each(function(){this.scrollTop=this.scrollHeight})},1)}function ka(){var a=!1;return e.each(function(){a=this.scrollHeight-this.clientHeight<=this.scrollTop+1}),a}function la(a){for(var b=[{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},{base:" ",letters:/[\u002D\u005F\u002E\u003F\u0021\u002C\u0027]/g},{base:"",letters:/[\u0028\u0029\u003A\u003B\u005B\u005C\u005D\u00EE]/g}],c=0;c<b.length;c++)a=a.replace(b[c].letters,b[c].base);return a}function ma(a,c){b.isLogEnabled&&console&&(c?console.log(a,c):console.log(a))}function na(){if(g)return JSON.stringify(g)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;a.loadJSON=z,a.loadMD=A,a.setOptions=v,a.start=B,a.addFunction=P,a.next=Q,a.getConversationAsJson=na,a.answers={},a.options={},u()}(function(){return window.siribro={},window.siribro}());