!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.siribro=t():e.siribro=t()}(this,function(){return function(e){function t(n){if(u[n])return u[n].exports;var i=u[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var u={};return t.m=e,t.c=u,t.i=function(e){return e},t.d=function(e,u,n){t.o(e,u)||Object.defineProperty(e,u,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var u=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(u,"a",u),u},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,u){"use strict";function n(){X={isLogEnabled:!0,isPersistHistory:!1,typingSpeed:20,readingSpeed:50,botface:"data:image/png;base64,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"},o(),r(),q=$('<div class="message" data-id="messageBloc"><table cellpadding="0" cellspacing="0" border="0"><tr><td><div class="portrait"></div></td><td><div class="sentence" data-id="sentenceZone"><div data-id="phraseZone"></div><div class="interphrase"></div></div></td></tr></table></div>'),_=$('[data-id="inputZone"]'),ee=$('[data-id="flowZone"]'),te=$('[data-id="chatZone"]'),ue=null,ne=[],ie={},oe=!1,re=[],ge={},ae=!1,se=null,le=null,fe=null,de=0,Ee=!0,$(document).ajaxStop(a),te.on("submit",C),_.focus(),te.on("mouseover",function(){_.focus()})}function i(e){if(e)try{for(var t in e)e.hasOwnProperty(t)&&(X[t]=e[t]);siribro.options=X}catch(e){J("ERROR : Unable to set options. Reason : ",e.message)}return this}function o(){$("<style>").prop("type","text/css").html("#chatContainer{margin:50px 0 0;bottom:10px;right:20px;position:fixed}#chatContainer .clear{clear:both}#chatContainer table,td,tr{margin:0;padding:0}#chatContainer button:focus,#chatContainer input:focus{outline:0}#chatContainer .message{padding:5px 10px 3px 5px}#chatContainer .message table{width:100%}#chatContainer .message table td:first-of-type{width:44px;vertical-align:bottom}#chatContainer .sentence div:first-child{padding:2px 7px;font-family:Helvetica,Arial,sans-serif;font-size:12px;line-height:16px;word-wrap:break-word}#chatContainer .interphrase{clear:both;margin-top:1px;height:1px}#chatContainer .portrait{background-size:contain;width:32px;height:32px;border-radius:10px;overflow:hidden;margin-right:10px}#chatContainer .fromBot{text-align:left}#chatContainer .fromBot .portrait{background-size:contain;margin-bottom:10px}#chatContainer .fromBot .sentence div:first-child{background:#e6e6e6;color:#000;float:left}#chatContainer .fromUser{text-align:right}#chatContainer .fromUser .sentence div:first-child{background:#4080ff;color:#fff;float:right}#chatContainer .fromHistory{opacity:.8}#chatContainer .fromSystem{text-align:center;font-size:12px;font-family:sans-serif;color:#555;font-weight:200}#chatContainer .chatZone{overflow:hidden;width:260px;margin:auto;border:1px solid #d6d6d6}#chatContainer .textZoneContainer{position:relative;height:300px;overflow:none}#chatContainer .textZoneContainer .textZone{position:absolute;width:100%;bottom:0;max-height:300px;overflow:auto}#chatContainer .sentence:first-child div:first-child{border-top-left-radius:8px;border-top-right-radius:8px}#chatContainer .sentence:last-child div:first-child{border-bottom-left-radius:8px;border-bottom-right-radius:8px;margin-bottom:5px}#chatContainer .fromBot .sentence div:first-child{border-top-right-radius:8px;border-bottom-right-radius:8px}#chatContainer .fromUser .sentence div:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}#chatContainer .message.typing{margin-top:0}#chatContainer .typing .sentence div:first-child{background-image:url(data:image/gif;base64,R0lGODlhTQAmAPf/AObm6ujo6q6tsuXk6eXk7auqrZiXmo+OkKalqe7t8/Dv9fLx9/n4/p+eor++w+Pi6Ojn64WEh6Cfo+rp8L28wZuanvj3/uDf5fj3/Pf2/K+us+bm5ejo6MHAxerq69LR1tDP1KCgoJ6enYaFiLq7v+Xl5qGgpLm4vYqJjZSTlvPy95ubm7OytsC/xKOipqmoq/b1+7e2u7i3vNfW3KKhpeTl5Lq5v+Lg6Nzb4Pb0/JaVmfTz+szL0ZCPk6Ojo4KBhNnY3srJzoyLj+bl57KxttTT2JOSlc/O08/O1MrJ0KampsbFyp6dooiHibe2vLW0uff2+/Hx9Ozr8+Tj5ZGQlMjHzI2MjcPCx4qKi7u6v5mYnJOTk5GRkY+PjoOChebl7ebm5+bl7Obl6uXk6uTj6ebm6Ofm7Ofn5+bl6ebl7uzr8e/u9L69wuvq8OTj6Orp7+bm6ejn7e3s8vPy+OXk6+Tj6uno7u3s8/Hw9vX0+u7t9Obl6PPy+erp7vHw9/Tz+ZeWmufn6KSjp7y7wOvq77Gwtebk7pGQk+jn7PX0++vq8ePi5+jn7uHg5fDv9rq5veLh59va37a1upeWmZ6doefm7efm6o2Mj5KRleno79fW2+bk7JqZncnIzeHg5+bk7+/u9ZWUmMvKz8PCyO3s8dbV2pybnqOipd7d4trZ3+vq8uPj4rOyuJiXm5OSl+3s9JyboNva4JeXlt/e5Obk7fLx+LSzuObn5ufn5ufl7bKxtb69waGgo+fn6eno7aSjqKinq+Xl6sLBxs7N0uTk4+Xl7OXm5ZiYl4+Qj728wuXj6efn7by7vvLy8rm4vpiWmOLh5eXk7uPj5KKhpu/u8/X0+ebk8fHw+IKCgefm6LW0ura1ube2uZ2coJCPj9jX3J+eodXU1/Pz+MHAw5STkpqZnpuanZSUk8LBxObl78nIzp+fn8rKzfX0/JGRju3t86uqr+vp8KyrsNTT1+np7unp783M0c3M0peYl87N0c7O0dXU2tbW2ebl6+bm5v///yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iMUNENjk1N0QxRDk5RjZCMkY1RDgyNzhCQjg0MEY4ODYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODEzQTk3QjUyMEI5MTFFMzkxMTdEODlGMTI5NTlCRTEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODEzQTk3QjQyMEI5MTFFMzkxMTdEODlGMTI5NTlCRTEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBBNkQ1QkI4RDUyMzY4MTE4MjJBRjRCMjFGNkM5RDdGIiBzdFJlZjpkb2N1bWVudElEPSIxQ0Q2OTU3RDFEOTlGNkIyRjVEODI3OEJCODQwRjg4NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2pp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);background-size:contain;width:27px}#chatContainer .inputArea{border-top:1px solid #e6e6e6;padding:5px 5px 2px 10px}#chatContainer .inputArea input{border:0;width:100%;height:24px;font-family:Helvetica,Arial,sans-serif;font-size:12px}").appendTo("head")}function r(){$("body").append('<div id="chatContainer" style="display:none" class="close">       <form data-id="chatZone">         <div class="chatZone">              <div class="textZoneContainer">                 <div data-id="flowZone" class="textZone"><!-- Here come new text --></div>             </div>              <div class="inputArea">                 <input type="text" placeholder="Type a message" data-id="inputZone">                  <input type="submit" value="Send" style="display:none"/>              </div>            </div>         </form>     </div>')}function a(){re.forEach(function(e){e()}),re=[]}function s(e){return T(e,"application/json"),this}function l(e){return T(e,"text/markdown"),this}function c(e){if(X.isPersistHistory&&!X.isHistoryLoaded&&("Cookies"in window?(ne=Cookies.getJSON("history"),null==ne&&(ne=[]),Q(),ie=Cookies.getJSON("answers"),null==ie&&(ie={}),siribro.answers=ie,X.isHistoryLoaded=!0):(J("ERROR : Unable the set isPersistHistory to true. Reason : you need to include the cookie management library","https://github.com/js-cookie/js-cookie "),X.isPersistHistory=!1)),!ae)return void re.push(function(){c(e)});if($("#chatContainer").show().removeClass("close").addClass("open"),null==ue)throw"Please load a valid Markdown or JSON before calling .start(...)";0==ne.length&&F(e)}function p(e){le=null!=e?e:G(se,le),E(le)}function E(e){if(null!=e)switch(e.type){case"sentence":f(e);break;case"pause":b(e);break;case"input":m(e);break;case"optionGroup":D(e);break;case"goto":x(e);break;case"function":v(e)}}function f(e){var t=.2,u=d(e.text),n=$("<div/>").append(u).text().length,i=n/(X.typingSpeed+(2*Math.random()*t-t)),o=0,r=0,a=ne.length>0?ne[ne.length-1]:{};if("User"==a.from){var s=a.sentence,l=$("<div/>").append(s).text().length;o=1,r=l/(X.readingSpeed+(2*Math.random()*t-t))}else r=n/X.readingSpeed;r+=o,J("====Sentence===== "),J("text : ",u),J("textlength : ",n),J("thinking duration : ",r),J("typing duration : ",i),ce=window.setTimeout(function(){ce=null,h(),pe=window.setTimeout(function(){pe=null,A(u,"Bot"),p()},1e3*i)},1e3*r)}function d(e){if(!e)return"";var t=new RegExp(/(\[\w{2,}\])+/,"gi"),u=e.replace(t,function(e,t,u){var n=g(e);return n[Math.floor(Math.random()*n.length)]}),n=u.split("|"),i=Math.floor(Math.random()*n.length);return $.trim(n[i])}function g(e){var t=[],u=I("value_bloc",e);if(u){var n=u.values;z(n)&&(t=n)}return t}function h(){Ee=W();var e=q.clone().addClass("typing").addClass("fromBot"),t="url('"+X.botface+"')";e.find(".portrait").css("background-image",t),e.find('[data-id="phraseZone"]').html("&nbsp"),ee.append(e),Y()}function A(e,t,u){var n=ee.find('[data-id="messageBloc"]:not(.typing)').last(),i=n.find('[data-id="sentenceZone"]').last(),o=!1,r=!0;u&&(r=!1);var a;switch(t){case"Bot":Ee=W(),n.hasClass("fromBot")?(o=!0,ee.find(".typing").remove()):(a=ee.find(".typing").removeClass("typing"),0==a.length&&(a=q.clone().addClass("fromBot"),ee.append(a)));break;case"User":Ee=!0,n.hasClass("fromUser")?o=!0:(a=q.clone().addClass("fromUser"),ee.find(".typing").length>0?ee.find(".typing").before(a):ee.append(a));break;case"System":r=!1,Ee=W(),a=$('<div class="separator fromSystem" data-id="messageBloc"><div data-id="phraseZone"></div></div>'),J(a),ee.append(a);break;default:return}o?a=i.clone().insertAfter(i):u&&a.addClass("fromHistory"),r&&j(e,t),null!=a&&a.find('[data-id="phraseZone"]').html(e),Y()}function b(e){var t=1*e.millisecond;J("====Pause===== "),J("Delai : ",t),pe=window.setTimeout(function(){p()},t)}function m(e){J("====Input===== "),J("wait for input... ")}function C(e){e.preventDefault();var t=$.trim(_.val());if(0!=t.length&&(fe=t,_.val(""),J("Value :",fe),A(fe,"User"),null!=le&&"input"==le.type)){var u=le.data;u&&(ie[u]=fe,siribro.answers=ie,X.isPersistHistory&&Cookies.set("answers",ie)),p()}}function x(e){var t=e.value;null!=t&&F(t)}function F(e){se=I("dialog_bloc",e),le=null,p()}function v(e){ge[e.name]()}function w(e,t){return ge[e]=t,this}function y(e){if(null!=le)if("function"==le.type){var t=G(se,le);if(null!=t)switch(t.type){case"optionGroup":t=B(t,e)}p(t)}else if("optionGroup"==le.type)if(e){var u=le.options,n=u[de],i=k(n);p(i)}else de+=1,D(le)}function D(e){J("====OptionGroup===== "),J("Choose an Option with last user input : ",fe);var t=B(e,fe);t!=e&&p(t)}function B(e,t){var u=e.options,n=null,i=null;if(z(u))for(var o=de;o<u.length&&null==n;o++){var r=u[o],a=r.type,s=r.value;if("function"==a)return de=o,v(r),e;R(s,t)&&(n=r)}if(null==n&&z(u)&&u.length>0){var l=u[u.length-1],c=l.value;c&&"other"==c.toLowerCase()&&(n=l)}if(null!=n)i=k(n);else{var p=S(se,e);p&&"input"==p.type&&(i=p)}return de=0,i}function k(e){var t=null,u=e.steps;return z(u)&&u.length>0&&(t=u[0]),t}function R(e,t){if(!e)return null;e=$.trim(e);var u=new RegExp(/(\[\w{2,}\])+/,"gi");e=e.replace(u,function(e,t,u){for(var n=g(e),i=0;i<n.length;i++){var o=M(n[i]);n[i]=o.replace(new RegExp(/\s/,"gi"),"\\s?")}return n.join("|")}),e="\\b("+e+")\\b",t=M(t);var u=new RegExp(e,"gi");return null!=t.match(u)}function M(e){var t=e;return null!=t&&(t=V(t.toLocaleLowerCase()),t=$.trim(t)),t}function Q(){for(var e=0;e<ne.length;e++){var t=ne[e];if(0==e){A(new Date(t.stamp).toLocaleDateString(),"System")}A(t.sentence,t.from,!0)}}function j(e,t){var u={from:t,stamp:+new Date,sentence:e};ne.push(u),X.isPersistHistory&&Cookies.set("history",ne)}function I(e,t){var u=ue,n=null;if(z(u))for(var i=0;i<u.length;i++){var o=u[i],r=o.type?o.type.toLowerCase():"";if(r==e.toLowerCase()&&(void 0===t||o.name==t)){n=o;break}}return n}function G(e,t){var u=null;if(null!=e)if(null==t)z(e.steps)&&e.steps.length>0&&(u=se.steps[0]);else if(z(e))for(var n=0;n<e.length;n++){if(e[n]===t){u=n+1<e.length?e[n+1]:-1;break}if(null!=(u=G(e[n],t))){u==-1&&z(e.steps)&&n+1<e.length&&(u=e[n+1]);break}}else if("object"===(void 0===e?"undefined":he(e))&&null!==e)for(var i in e)if(e.hasOwnProperty(i)&&null!=(u=G(e[i],t)))return u;return u}function S(e,t){var u=null;if(null!=e)if(null==t)z(e.steps)&&e.steps.length>0&&(u=se.steps[0]);else if(z(e))for(var n=0;n<e.length;n++){if(e[n]===t){u=n-1>0?e[n-1]:-1;break}if(null!=(u=S(e[n],t))){u==-1&&z(e.steps)&&n-1>0&&(u=e[n-1]);break}}else if("object"===(void 0===e?"undefined":he(e))&&null!==e)for(var i in e)if(e.hasOwnProperty(i)&&null!=(u=S(e[i],t)))return u;return u}function T(e,t){$.ajax({url:e,beforeSend:function(e){e.overrideMimeType(t+"; charset=utf-8")},complete:function(e,t){if("success"!=t)throw"Ajax call failed : "+t;ae=!0}}).done(function(e){null!=e&&e.length>0&&("application/json"==t?ue=e:"text/markdown"==t&&(ue=N(e)))})}function N(e){var t=null,u=new RegExp(/^.*$/,"gm"),n=new RegExp(/^\s*$/,"g"),i=new RegExp(/[^.]?\/\/.*$/,"gm"),o=new RegExp(/[^.]?\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//,"g");if(e){t=[],e=e.replace(i,"").replace(o,""),e=e.replace(/\t/g,"    ");var r=e.match(u);r.push("");for(var a=[],s=[],l=0;l<r.length;l++){var c=r[l];n.test(c)?s.length>0&&(a.push(s),s=[]):s.push(c)}for(var l=0;l<a.length;l++){var p=Z(a[l]);p&&t.push(p)}}return t}function Z(e){var t=new RegExp(/^#\s(\w+)\s*$/,"g"),u=new RegExp(/^(\[\w+\])\s*$/,""),n=new RegExp(/\s*\*\s(.+)/,""),i=e.shift(),o=null,r=null,a=[];if(r=t.exec(i))a=L(e,0),o={type:"dialog_bloc",name:r[1],steps:a};else if(r=u.exec(i)){for(var s=null,l=0;l<e.length;l++)(s=n.exec(e[l]))&&a.push($.trim(s[1]));o={type:"value_bloc",name:r[1],values:a}}return o}function L(e,t){for(var u=[],n=new RegExp(/^(\s*)/,""),i=new RegExp(/\s*\*\s(.+)$/,""),o=new RegExp(/^\s*\*\s`\s*(.+)\((\w*)\)\s*`\s*$/,""),r=new RegExp(/^\s*\d{1,}\.\s(.+)$/,""),a={};e.length>0;){var s=e[0],l=n.exec(s),c=l[0].length;if(c<t)break;e.shift();var p=null;if(p=o.exec(s))(a=H(p))&&u.push(a);else if(p=i.exec(s))(a=U(p))&&u.push(a);else if(p=r.exec(s)){"optionGroup"!=a.type&&(a=O())&&u.push(a);var E=P(p,e,c);E&&a.options.push(E)}else a=null}return u}function O(){return{type:"optionGroup",options:[]}}function P(e,t,u){var n=null;if(z(e)&&e.length>0){var i=L(t,u+1);n={type:"option",value:e[1],steps:i}}return n}function U(e){var t=null;return z(e)&&e.length>0&&(t={type:"sentence",text:$.trim(e[1])}),t}function H(e){var t=null;if(z(e)&&e.length>0){var u=e[1],n=e.length>2?$.trim(e[2]):null;switch(u){case"input":t={type:"input",data:n};break;case"goto":t={type:"goto",value:n};break;case"pause":t={type:"pause",millisecond:n};break;default:t={type:"function",name:u}}}return t}function z(e){return"[object Array]"===Object.prototype.toString.call(e)}function Y(){window.setTimeout(function(){Ee&&ee.each(function(){this.scrollTop=this.scrollHeight})},1)}function W(){var e=!1;return ee.each(function(){e=this.scrollHeight-this.clientHeight<=this.scrollTop+1}),e}function V(e){for(var t=[{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g},{base:" ",letters:/[\u002D\u005F\u002E\u003F\u0021\u002C\u0027]/g},{base:"",letters:/[\u0028\u0029\u003A\u003B\u005B\u005C\u005D\u00EE]/g}],u=0;u<t.length;u++)e=e.replace(t[u].letters,t[u].base);return e}function J(e,t){X.isLogEnabled&&console&&(t?console.log(e,t):console.log(e))}function K(){if(ue)return JSON.stringify(ue)}var X,q,_,ee,te,ue,ne,ie,oe,re,ae,se,le,ce,pe,Ee,fe,de,ge,he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae={};Ae.loadJSON=s,Ae.loadMD=l,Ae.setOptions=i,Ae.start=c,Ae.addFunction=w,Ae.next=y,Ae.getConversationAsJson=K,Ae.answers={},Ae.options={},n(),e.exports=Ae}])});